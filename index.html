<!doctype html>
<html>
  <head>
    <meta charset="utf-8">
    <meta http-equiv="X-UA-Compatible" content="chrome=1">
    <title>Unthesaurus scraping by alexrutherford</title>

    <link rel="stylesheet" href="stylesheets/styles.css">
    <link rel="stylesheet" href="stylesheets/github-light.css">
    <meta name="viewport" content="width=device-width, initial-scale=1, user-scalable=no">
    <!--[if lt IE 9]>
    <script src="//html5shiv.googlecode.com/svn/trunk/html5.js"></script>
    <![endif]-->
  </head>
  <body>
    <div class="wrapper">
      <header>
        <h1>Unthesaurus scraping</h1>
        <p>Scripts to scrape hierarchical taxonomy from UNBIS Thesaurus</p>

        <p class="view"><a href="https://github.com/alexrutherford/unthesaurus_scraping">View the Project on GitHub <small>alexrutherford/unthesaurus_scraping</small></a></p>


        <ul>
          <li><a href="https://github.com/alexrutherford/unthesaurus_scraping/zipball/master">Download <strong>ZIP File</strong></a></li>
          <li><a href="https://github.com/alexrutherford/unthesaurus_scraping/tarball/master">Download <strong>TAR Ball</strong></a></li>
          <li><a href="https://github.com/alexrutherford/unthesaurus_scraping">View On <strong>GitHub</strong></a></li>
        </ul>
      </header>
      <section>
        <h1>
<a id="un-thesaurus-scraping" class="anchor" href="#un-thesaurus-scraping" aria-hidden="true"><span class="octicon octicon-link"></span></a>UN Thesaurus Scraping</h1>

<p>Did you know that the UN library services has carefully constructed a hierarchical taxonomy of terms related to it's work? For example you can see <a href="http://lib-thesaurus.un.org/LIB/DHLUNBISThesaurus.nsf/MultiEng/0037CF0C07DD6D2485256AA0005FA8F3?OpenDocument">from this example</a> that 'Metal Working Industry' has broader terms ('Heavy Industry') and narrower terms ('Copper Industry') and related terms ('Metals' and 'Welding'). These terms are all translated into the 6 official languages of the UN: English, French, Spanish, Chinese, Russian and Arabic. </p>

<p>This taxonomy represents an awesome resource for understanding how language related to UN and diplomatic work is used. However, it is currently under utilised as the raw underlying data is not easily available. This is a set of Python scripts to grab that data, put it in an easily digestable JSON format and perform some simple comparison of these terms.</p>

<p>Series of scripts to grab the content of the <a href="http://lib-thesaurus.un.org/LIB/DHLUNBISThesaurus.nsf/%24%24searche?OpenForm">UNBIS thesaurus</a>. More info on the thesuarus <a href="http://lib-thesaurus.un.org/LIB/DHLUNBISThesaurus.nsf/zHelpDocuments/English+About+Help?OpenDocument">here</a></p>

<h1>
<a id="usage" class="anchor" href="#usage" aria-hidden="true"><span class="octicon octicon-link"></span></a>Usage</h1>

<p><em>Please use this script sensibly, do not hit the UN BIS server any more than necessary. A copy of the output is provided here, this code is just for informational purposes.</em></p>

<pre><code>./grab_categories.sh

python parse_links_categories.py
</code></pre>

<p>Produces each term and its direct link in a TSV file; <code>terms_links.csv</code></p>

<pre><code>python get_words_from_links.py
</code></pre>

<p>Cycles through each term,link pair in <code>terms_links.csv</code>, grabs translations in all 6 languages and writes to file.</p>

<pre><code>parse_relations.py
</code></pre>

<p>Parses the panels on each page describing how the term relates to other terms in each language e.g. related terms, broader terms.</p>

<p>Outputs relationsHash which has the following schema</p>

<pre><code>relationsHash[lang][translatedTerm][relation]=[relatedTerm1,
    relatedTerm2...relatedTermN]
</code></pre>

<p>Example (taken from <a href="http://lib-thesaurus.un.org/LIB/DHLUNBISThesaurus.nsf/MultiEng/0037CF0C07DD6D2485256AA0005FA8F3?OpenDocument">here</a>):</p>

<pre><code>relationsHash['ES']['INDUSTRIA METALMECANICA']
    ['Broader terms']=['INDUSTRIA PESADA']

relations.csv stores different types of ontology relations in each language
</code></pre>

<p><code>make_iframe_page.ipynb</code> takes a random selection of terms and created a page with embedded plots of <a href="https://books.google.com/ngrams/">n-gram</a> frequency</p>

<h1>
<a id="dependencies" class="anchor" href="#dependencies" aria-hidden="true"><span class="octicon octicon-link"></span></a>Dependencies</h1>

<p>Uses core Python libraries and command line tools <code>curl</code> and <code>uniq</code></p>

<p>Only third-party library is <a href="http://www.crummy.com/software/BeautifulSoup/bs4/doc/">Beautiful Soup</a></p>

<h1>
<a id="ontology" class="anchor" href="#ontology" aria-hidden="true"><span class="octicon octicon-link"></span></a>Ontology</h1>

<p>The ontology terms that are included for each language are</p>

<ul>
<li>Broader terms:</li>
<li>Narrower terms:</li>
<li>Related terms:</li>
<li>Top terms:</li>
</ul>

<h1>
<a id="to-do" class="anchor" href="#to-do" aria-hidden="true"><span class="octicon octicon-link"></span></a>To Do</h1>

<p>Parse out 'Used for:' in main term panel, <a href="http://lib-thesaurus.un.org/LIB/DHLUNBISThesaurus.nsf/MultiEng/06120B6689A0899C85256AA0005FA2C1?OpenDocument">example</a></p>
      </section>
      <footer>
        <p>This project is maintained by <a href="https://github.com/alexrutherford">alexrutherford</a></p>
        <p><small>Hosted on GitHub Pages &mdash; Theme by <a href="https://github.com/orderedlist">orderedlist</a></small></p>
      </footer>
    </div>
    <script src="javascripts/scale.fix.js"></script>
    
  </body>
</html>
