{"name":"Unthesaurus scraping","tagline":"Scripts to scrape hierarchical taxonomy from UNBIS Thesaurus","body":"# UN Thesaurus Scraping\r\n\r\nDid you know that the UN library services has carefully constructed a hierarchical taxonomy of terms related to it's work? For example you can see [from this example](http://lib-thesaurus.un.org/LIB/DHLUNBISThesaurus.nsf/MultiEng/0037CF0C07DD6D2485256AA0005FA8F3?OpenDocument) that 'Metal Working Industry' has broader terms ('Heavy Industry') and narrower terms ('Copper Industry') and related terms ('Metals' and 'Welding'). These terms are all translated into the 6 official languages of the UN: English, French, Spanish, Chinese, Russian and Arabic. \r\n\r\nThis taxonomy represents an awesome resource for understanding how language related to UN and diplomatic work is used. However, it is currently under utilised as the raw underlying data is not easily available. This is a set of Python scripts to grab that data, put it in an easily digestable JSON format and perform some simple comparison of these terms.\r\n\r\nSeries of scripts to grab the content of the [UNBIS thesaurus](http://lib-thesaurus.un.org/LIB/DHLUNBISThesaurus.nsf/$$searche?OpenForm). More info on the thesuarus [here](http://lib-thesaurus.un.org/LIB/DHLUNBISThesaurus.nsf/zHelpDocuments/English+About+Help?OpenDocument)\r\n\r\n# Usage\r\n\r\n_Please use this script sensibly, do not hit the UN BIS server any more than necessary. A copy of the output is provided here, this code is just for informational purposes._\r\n\r\n    ./grab_categories.sh\r\n\r\n    python parse_links_categories.py\r\n\r\nProduces each term and its direct link in a TSV file; `terms_links.csv`\r\n\r\n    python get_words_from_links.py\r\n\r\nCycles through each term,link pair in `terms_links.csv`, grabs translations in all 6 languages and writes to file.\r\n\r\n    parse_relations.py\r\n\r\nParses the panels on each page describing how the term relates to other terms in each language e.g. related terms, broader terms.\r\n\r\nOutputs relationsHash which has the following schema\r\n\r\n    relationsHash[lang][translatedTerm][relation]=[relatedTerm1,\r\n        relatedTerm2...relatedTermN]\r\n\r\nExample (taken from [here](http://lib-thesaurus.un.org/LIB/DHLUNBISThesaurus.nsf/MultiEng/0037CF0C07DD6D2485256AA0005FA8F3?OpenDocument)):\r\n\r\n    relationsHash['ES']['INDUSTRIA METALMECANICA']\r\n        ['Broader terms']=['INDUSTRIA PESADA']\r\n\r\n    relations.csv stores different types of ontology relations in each language\r\n\r\n`make_iframe_page.ipynb` takes a random selection of terms and created a page with embedded plots of [n-gram](https://books.google.com/ngrams/) frequency\r\n\r\n# Dependencies\r\n\r\nUses core Python libraries and command line tools `curl` and `uniq`\r\n\r\nOnly third-party library is [Beautiful Soup](http://www.crummy.com/software/BeautifulSoup/bs4/doc/)\r\n\r\n# Ontology\r\n\r\nThe ontology terms that are included for each language are\r\n\r\n* Broader terms:\r\n* Narrower terms:\r\n* Related terms:\r\n* Top terms:\r\n\r\n# To Do\r\n\r\nParse out 'Used for:' in main term panel, [example](http://lib-thesaurus.un.org/LIB/DHLUNBISThesaurus.nsf/MultiEng/06120B6689A0899C85256AA0005FA2C1?OpenDocument)\r\n","google":"","note":"Don't delete this file! It's used internally to help with page regeneration."}